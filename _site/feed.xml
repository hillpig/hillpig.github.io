<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.8.5">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2020-07-31T17:28:36-07:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">山猪</title><subtitle>方寸之间 点滴墨彩</subtitle><entry><title type="html">Git Log</title><link href="http://localhost:4000/git-log/" rel="alternate" type="text/html" title="Git Log" /><published>2020-07-31T00:00:00-07:00</published><updated>2020-07-31T00:00:00-07:00</updated><id>http://localhost:4000/git-log</id><content type="html" xml:base="http://localhost:4000/git-log/">&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/08/01/OqY9KTlo7izgFaf.jpg&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;最近申请-bc的-sred-过程中需要统计工作量用到了git-log的一些高级功能&quot;&gt;最近申请 BC的 SR&amp;amp;ED 过程中，需要统计工作量，用到了git log的一些高级功能&lt;/h2&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git log &lt;span class=&quot;nt&quot;&gt;--after&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2018-10-1&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--before&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2019-9-30&quot;&lt;/span&gt;  &lt;span class=&quot;nt&quot;&gt;--pretty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;format:&lt;span class=&quot;s2&quot;&gt;&quot;%h;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;basename&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;git rev-parse &lt;span class=&quot;nt&quot;&gt;--show-toplevel&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;;%an;%ad;%s&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--author&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Samuel'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; ~/log2.csv
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;效果如cover image&lt;/p&gt;</content><author><name></name></author><category term="Git" /><summary type="html"></summary></entry><entry><title type="html">Charles Proxy</title><link href="http://localhost:4000/Charles/" rel="alternate" type="text/html" title="Charles Proxy" /><published>2020-07-22T00:00:00-07:00</published><updated>2020-07-22T00:00:00-07:00</updated><id>http://localhost:4000/Charles</id><content type="html" xml:base="http://localhost:4000/Charles/">&lt;p&gt;&lt;img src=&quot;https://rileymacdonald.ca/wp-content/uploads/2013/12/charles.png&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;使用charles对移动设备进行https抓包-默认是不可用的&quot;&gt;使用Charles对移动设备进行HTTPS抓包 默认是不可用的&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;homepage –&amp;gt; Proxy –&amp;gt; Proxy Settings&lt;/p&gt;

    &lt;p&gt;设置proxy接收端口和对外访问需要用到的端口&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;homepage –&amp;gt; Help –&amp;gt; SSL Proxying –&amp;gt; Install Charles Root Certificate on a Mobile Device or Remote Browser&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;需要安装SSL的certificate&lt;/p&gt;

&lt;h2 id=&quot;ios-设备适配&quot;&gt;IOS 设备适配&lt;/h2&gt;
&lt;p&gt;IOS设备 需要下载Charles的根证书， chls.pro/ssl , 允许下载 –&amp;gt; 安装藐视文件 –&amp;gt; 完全信任&lt;/p&gt;

&lt;h2 id=&quot;android-设备适配&quot;&gt;Android 设备适配&lt;/h2&gt;
&lt;p&gt;Androi7.0之后的版本，增加了证书验证，APP内不再默认信任用户设备的证书。&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;在res底下创建一个xml文件夹，然后在内部创建一个名为 “network_security_config.xml”的文件，文件内容如下:&lt;/p&gt;

    &lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;nt&quot;&gt;&amp;lt;network-security-config&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;nt&quot;&gt;&amp;lt;base-config&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;cleartextTrafficPermitted=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;true&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;nt&quot;&gt;&amp;lt;trust-anchors&amp;gt;&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;&amp;lt;certificates&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;system&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;overridePins=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;true&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;&amp;lt;certificates&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;user&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;overridePins=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;true&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;nt&quot;&gt;&amp;lt;/trust-anchors&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;nt&quot;&gt;&amp;lt;/base-config&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;/network-security-config&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;在AndroidManifest里的&lt;application&gt;标签中，添加代码：&lt;/application&gt;&lt;/p&gt;

    &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;android:networkSecurityConfig=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;@xml/network_security_config&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;Note: 这个方法仅供测试使用，会有一些安全隐患，可以参考底部的几个文章改进。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;注意事项&quot;&gt;注意事项&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;移动设备和proxy host在同一个 WI-FI SSID内&lt;/li&gt;
  &lt;li&gt;proxy可以限制需要访问的域名地址&lt;/li&gt;
  &lt;li&gt;proxy host的防火墙设置需要更改&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/xiaozi/p/9229615.html&quot;&gt;参考原文1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.jianshu.com/p/392362115090&quot;&gt;参考原文2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://iacn.me/2018/03/14/network-security-configuration-newer-than-android-n/&quot;&gt;参考原文3&lt;/a&gt;&lt;/p&gt;</content><author><name></name></author><category term="IT" /><category term="Network" /><summary type="html"></summary></entry><entry><title type="html">NAT</title><link href="http://localhost:4000/NAT/" rel="alternate" type="text/html" title="NAT" /><published>2020-07-22T00:00:00-07:00</published><updated>2020-07-22T00:00:00-07:00</updated><id>http://localhost:4000/NAT</id><content type="html" xml:base="http://localhost:4000/NAT/">&lt;p&gt;&lt;img src=&quot;https://doc.bce.baidu.com/bce-documentation/VPC/VPC_bestpractise01.png&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;听ccie大神说&quot;&gt;听CCIE大神说&lt;/h2&gt;

&lt;p&gt;面试被问了一个NAT的问题，有点懵，和PAT的概念有点混淆，PAT是一个静态映射表，那么NAT是什么？&lt;/p&gt;

&lt;p&gt;咨询了朋友，一个CCIE大神，获得信息如下：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;在Cisco的技术栈中，没有直接的PAT的概念，只有以下三种&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;Static NAT&lt;/li&gt;
      &lt;li&gt;Dynamic NAT&lt;/li&gt;
      &lt;li&gt;Overloading&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;其中Overloading 等同于PAT&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;NAT可以是IP 映射IP 也可以是 IP+Port 映射 IP+Port&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;如果是IP 映射IP 就有 Public IP Pool的概念&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;静态NAT 是人工设定的&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;动态NAT 是系统自动分配的，此时映射关系会有一个生命周期的概念，比如我们一般会设置500秒,或者120秒, 这段时间如果没有session保持，那么映射关系就会被清除。此时再有response 从公网发过来，就会被丢弃。一般来说这个时间周期内都没有返回的包, 那也不是什么正常的通讯。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;NAT不管哪一种,  核心都是会使用translation table, 动态和静态的区别就是静态NAT在你配置完命令后这个表格里就有内容了&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;大家会说NAT 某种程度上也起到一定的安全作用, 就是有里面向外的访问, 才可以让外面向内传输,  否则,外面不能直接凭空向内访问&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;自说自话&quot;&gt;自说自话&lt;/h2&gt;
&lt;p&gt;网关是如何处理外网对内网的应答呢？response 回到了网关，这时候根据包头中 destination 的 IP+Port 信息，对照映射表，网关就可以判断是内网里哪个 IP+Port ，把包中的 destination 这段替换掉，重新打包封装发给内网，就回到了原来的主机。&lt;/p&gt;</content><author><name></name></author><category term="IT" /><category term="Network" /><summary type="html"></summary></entry><entry><title type="html">SQL - Fuzzy Search</title><link href="http://localhost:4000/sql-fuzzy-search/" rel="alternate" type="text/html" title="SQL - Fuzzy Search" /><published>2020-06-20T00:00:00-07:00</published><updated>2020-06-20T00:00:00-07:00</updated><id>http://localhost:4000/sql-fuzzy-search</id><content type="html" xml:base="http://localhost:4000/sql-fuzzy-search/">&lt;p&gt;&lt;img src=&quot;https://350519-1085912-raikfcquaxqncofqfm.stackpathdns.com/wp-content/uploads/2019/03/image-36.png&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h1 id=&quot;mysql模糊搜索&quot;&gt;MySQL模糊搜索&lt;/h1&gt;

&lt;h2 id=&quot;四种模糊搜索&quot;&gt;四种模糊搜索&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;LIKE&lt;/p&gt;

    &lt;p&gt;Like主要支持两种通配符，分别是”_“和”%”，其中前者代表匹配1个任意字符，常用于充当占位符；而后者代表匹配0个或多个任意字符。从某种意义上讲，Like可看作是一个精简的正则表达式功能。&lt;/p&gt;

    &lt;p&gt;例如，在如上表中查找所有以”hello”开头的记录，则其SQL语句为：&lt;/p&gt;

    &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;words&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tests&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;words&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;LIKE&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'hello%'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;如果想查找所有以”hello”开头且至少含有6个字符的记录，则可简单修改SQL语句如下：&lt;/p&gt;

    &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;words&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tests&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;words&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;LIKE&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'hello_%'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;另外：当在Like模式字段中，若不包含任何”_“和”%”通配符，则等价于”=”，表示精确匹配，例如查询语句……Like “hello”，则仅返回hello一条记录；还可在Like前加限定词Not，表示结果取反。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;RegExp&lt;/p&gt;

    &lt;p&gt;正则表达式，更加强大，MySQL语法支持绝大多数正则表达式功能。为了限定正则表达式以某个模式串开头或者结尾，可以通过添加”^”和”$”标识符来限定，例如仍然搜索以”hello”开头的目标字段，则其SQL语句为：&lt;/p&gt;

    &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;words&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tests&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;words&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;REGEXP&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'hello'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;内置函数&lt;/p&gt;

    &lt;p&gt;LOCATE(substr,str)  //返回substr在str中第一次出现的位置，LOCATE()只要找到返回的结果都大于0(即使是查询的内容就是最开始部分)，没有查找到才返回0
 LOCATE(substr,str,pos)  //同上，但是多了一个位置参数，返回sunstr在str中pos位置后第一次出现的位置
 INSTR(string ,substring)    //返回substring首次在string中出现的位置，据说是LOCATE()方法的别名函数，功能一样
 POSITION(substr IN str)  //同上，据说也是LOCATE()方法的别名函数，功能一样，不过它不再是通过返回值来判断，而是使用关键字IN
 FIND_IN_SET(str,strlist)    //strlist必须要是以逗号分隔的字符串，如果字符串str在strlist组成的N子串的字符串列表中存在，返回值的范围为1到N&lt;/p&gt;

    &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;words&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tests&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;INSTR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;words&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'hello'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  
 &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;words&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tests&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LOCATE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'hello'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;words&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  
 &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;words&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tests&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;POSITION&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'hello'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;IN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;words&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;注意：以上函数都不能使用索引&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;全文索引&lt;/p&gt;

    &lt;p&gt;全文索引是MySQL中索引的一种，曾经仅在引擎为MyISAM的表中支持，从5.6版本开始在InnoDB中也开始支持全文索引，支持的字段格式包括CHAR、VARCHAR和TEXT。在如上已经添加了全文索引的tests表中，仍然查询包含”hello”的记录，应用全文索引查询的SQL语句为：&lt;/p&gt;

    &lt;p&gt;index 是前提条件，否则会报错： &lt;em&gt;SQL Error [1191] [HY000]: Can’t find FULLTEXT index matching the column list&lt;/em&gt;&lt;/p&gt;

    &lt;p&gt;创建表，并建立索引&lt;/p&gt;

    &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;k&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IF&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;EXISTS&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tests&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;words&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;TEXT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FULLTEXT&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;words&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;或者对已存在的表，创建相应的索引&lt;/p&gt;

    &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;k&quot;&gt;ALTER&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tests&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;ADD&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FULLTEXT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;words&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;之后可以进行搜索&lt;/p&gt;

    &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;words&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tests&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;MATCH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;words&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;against&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'hello'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;

    &lt;p&gt;实际上，MATCH(words) against(‘hello’)返回的是字段words对目标字符”hello”的匹配程度：当不存在任何匹配结果时，返回0；否则，根据匹配次数的多少和位置先后返回一个匹配度。例如，如下SQL语句返回表中每条记录对目标字段”hello”的匹配度&lt;/p&gt;

    &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;k&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;MATCH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;words&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;against&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'hello'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;FROM&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tests&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;查询性能&quot;&gt;查询性能&lt;/h2&gt;

&lt;p&gt;基于索引的搜索一定是最快的，LIKE通配符次之但是和其他的方式差别不大。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://database.51cto.com/art/202004/614332.htm&quot;&gt;参考原文1&lt;/a&gt;&lt;/p&gt;</content><author><name></name></author><category term="Database" /><category term="SQL" /><summary type="html"></summary></entry><entry><title type="html">SQL - Full Text Retrieval</title><link href="http://localhost:4000/sql-fulltext-retrieval/" rel="alternate" type="text/html" title="SQL - Full Text Retrieval" /><published>2020-06-20T00:00:00-07:00</published><updated>2020-06-20T00:00:00-07:00</updated><id>http://localhost:4000/sql-fulltext-retrieval</id><content type="html" xml:base="http://localhost:4000/sql-fulltext-retrieval/">&lt;p&gt;&lt;img src=&quot;https://intellipaat.com/mediaFiles/2015/11/SQL-e1559106221282.png&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;版本支持&quot;&gt;版本支持&lt;/h2&gt;

&lt;p&gt;开始之前，先说一下全文索引的版本、存储引擎、数据类型的支持情况&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;MySQL 5.6 以前的版本，只有 MyISAM 存储引擎支持全文索引；&lt;/li&gt;
  &lt;li&gt;MySQL 5.6 及以后的版本，MyISAM 和 InnoDB 存储引擎均支持全文索引;&lt;/li&gt;
  &lt;li&gt;只有字段的数据类型为 char、varchar、text 及其系列才可以建全文索引。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;测试或使用全文索引时，要先看一下自己的 MySQL 版本、存储引擎和数据类型是否支持全文索引。&lt;/p&gt;

&lt;h2 id=&quot;创建索引&quot;&gt;创建索引&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;创建表时创建全文索引&lt;/p&gt;

    &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;k&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fulltext_test&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
     &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AUTO_INCREMENT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;n&quot;&gt;content&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;n&quot;&gt;tag&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;varchar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;PRIMARY&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;KEY&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
     &lt;span class=&quot;n&quot;&gt;FULLTEXT&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;KEY&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;content_tag_fulltext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;//&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;创建联合全文索引列&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ENGINE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MyISAM&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;CHARSET&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;utf8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;在已存在的表上创建全文索引&lt;/p&gt;

    &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;k&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fulltext&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;content_tag_fulltext&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fulltext_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;通过 SQL 语句 ALTER TABLE 创建全文索引&lt;/p&gt;

    &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;k&quot;&gt;alter&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fulltext_test&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fulltext&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;content_tag_fulltext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;删除检索&quot;&gt;删除检索&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;直接使用 DROP INDEX 删除全文索引&lt;/p&gt;

    &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;k&quot;&gt;drop&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;content_tag_fulltext&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fulltext_test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;通过 SQL 语句 ALTER TABLE 删除全文索引&lt;/p&gt;

    &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;k&quot;&gt;alter&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fulltext_test&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;drop&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;index&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;content_tag_fulltext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;使用全文检索&quot;&gt;使用全文检索&lt;/h2&gt;

&lt;p&gt;和常用的模糊匹配使用 like + % 不同，全文索引有自己的语法格式，使用 match 和 against 关键字，比如&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fulltext_test&lt;/span&gt; 
    &lt;span class=&quot;k&quot;&gt;where&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;against&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'xxx xxx'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;注意： match() 函数中指定的列必须和全文索引中指定的列完全相同，否则就会报错，无法使用全文索引，这是因为全文索引不会记录关键字来自哪一列。如果想要对某一列使用全文索引，请单独为该列创建全文索引。&lt;/p&gt;

&lt;h2 id=&quot;搜索长度&quot;&gt;搜索长度&lt;/h2&gt;

&lt;p&gt;MySQL 中的全文索引，有两个变量，最小搜索长度和最大搜索长度，对于长度小于最小搜索长度和大于最大搜索长度的词语，都不会被索引。通俗点就是说，想对一个词语使用全文索引搜索，那么这个词语的长度必须在以上两个变量的区间内。&lt;/p&gt;

&lt;p&gt;这两个的默认值可以使用以下命令查看：&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;show&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;variables&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;like&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'%ft%'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;可以看到这两个变量在 MyISAM 和 InnoDB 两种存储引擎下的变量名和默认值&lt;/p&gt;

&lt;div class=&quot;language-console highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;go&quot;&gt;// MyISAM
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;ft_min_word_len = 4;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;ft_max_word_len = 84;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;go&quot;&gt;
// InnoDB
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;innodb_ft_min_token_size = 3;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;gp&quot;&gt;innodb_ft_max_token_size = 84;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;可以看到最小搜索长度 MyISAM 引擎下默认是 4，InnoDB 引擎下是 3，也即，MySQL 的全文索引只会对长度大于等于 4 或者 3 的词语建立索引。&lt;/p&gt;

&lt;h2 id=&quot;配置最小搜索长度&quot;&gt;配置最小搜索长度&lt;/h2&gt;

&lt;p&gt;全文索引的相关参数都无法进行动态修改，必须通过修改 MySQL 的配置文件来完成。修改最小搜索长度的值为 1，首先打开 MySQL 的配置文件 /etc/my.cnf，在 [mysqld] 的下面追加以下内容&lt;/p&gt;

&lt;div class=&quot;language-console highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;go&quot;&gt;[mysqld]
innodb_ft_min_token_size = 1
ft_min_word_len = 1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;然后重启 MySQL 服务器，并修复全文索引。注意，修改完参数以后，一定要修复下索引，不然参数不会生效。&lt;/p&gt;

&lt;p&gt;两种修复方式，可以使用下面的命令修复&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;repair&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;quick&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;或者直接删掉重新建立索引&lt;/p&gt;

&lt;h2 id=&quot;两种全文索引&quot;&gt;两种全文索引&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;自然语言的全文索引&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;默认情况下，或者使用 in natural language mode 修饰符时，match() 函数对文本集合执行自然语言搜索，上面的例子都是自然语言的全文索引。&lt;/p&gt;

&lt;p&gt;自然语言搜索引擎将计算每一个文档对象和查询的相关度。这里，相关度是基于匹配的关键词的个数，以及关键词在文档中出现的次数。在整个索引中出现次数越少的词语，匹配时的相关度就越高。相反，非常常见的单词将不会被搜索，如果一个词语的在超过 50% 的记录中都出现了，那么自然语言的搜索将不会搜索这类词语。上面提到的，测试表中必须有 4 条以上的记录，就是这个原因。&lt;/p&gt;

&lt;p&gt;这个机制也比较好理解，比如说，一个数据表存储的是一篇篇的文章，文章中的常见词、语气词等等，出现的肯定比较多，搜索这些词语就没什么意义了，需要搜索的是那些文章中有特殊意义的词，这样才能把文章区分开。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;布尔全文索引&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;在布尔搜索中，我们可以在查询中自定义某个被搜索的词语的相关性，当编写一个布尔搜索查询时，可以通过一些前缀修饰符来定制搜索。&lt;/p&gt;

&lt;p&gt;MySQL 内置的修饰符，上面查询最小搜索长度时，搜索结果 ft_boolean_syntax 变量的值就是内置的修饰符，下面简单解释几个，更多修饰符的作用可以查手册&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;+ 必须包含该词
- 必须不包含该词
&amp;gt; 提高该词的相关性，查询的结果靠前
&amp;lt; 降低该词的相关性，查询的结果靠后
(*)星号 通配符，只能接在词后面
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;对于上面提到的问题，可以使用布尔全文索引查询来解决，使用下面的命令，a、aa、aaa、aaaa 就都被查询出来了。&lt;/p&gt;

&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;where&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;match&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;against&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'a*'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;多语言支持&quot;&gt;多语言支持&lt;/h2&gt;

&lt;p&gt;MySQL 的全文索引最开始仅支持英语，因为英语的词与词之间有空格，使用空格作为分词的分隔符是很方便的。亚洲文字，比如汉语、日语、汉语等，是没有空格的，这就造成了一定的限制。不过 MySQL 5.7.6 开始，引入了一个 ngram 全文分析器来解决这个问题，并且对 MyISAM 和 InnoDB 引擎都有效。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/35675553&quot;&gt;参考原文1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.zhihu.com/question/20596402&quot;&gt;参考原文2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/47581960&quot;&gt;参考原文3&lt;/a&gt;&lt;/p&gt;</content><author><name></name></author><category term="Database" /><category term="SQL" /><summary type="html"></summary></entry><entry><title type="html">SSO</title><link href="http://localhost:4000/sso/" rel="alternate" type="text/html" title="SSO" /><published>2020-06-20T00:00:00-07:00</published><updated>2020-06-20T00:00:00-07:00</updated><id>http://localhost:4000/sso</id><content type="html" xml:base="http://localhost:4000/sso/">&lt;p&gt;&lt;img src=&quot;https://miro.medium.com/max/1400/0*rf6Z7l0CXPB4eQeq.jpg&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;sso&quot;&gt;SSO&lt;/h2&gt;

&lt;p&gt;SSO 是英文 Single Sign On 的缩写，翻译过来就是单点登录。顾名思义，它把两个及以上个产品中的用户登录逻辑抽离出来，达到只输入一次用户名密码，就能同时登录多个产品的效果。&lt;/p&gt;

&lt;p&gt;打个比方，SSO 和我们去迪士尼玩时购买的通票很像。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/06/30/hL8N5oqJHdQvOkz.png&quot; alt=&quot;WX20200629-170628.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;我们只要买一次通票，就可以玩所有游乐场内的设施，而不需要在过山车或者摩天轮那里重新买一次票。在这里，买票就相当于登录认证，游乐场就相当于使用一套 SSO 的公司，各种游乐设施就相当于公司的各个产品。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/06/30/xcjFe8YkBGLdQy2.png&quot; alt=&quot;WX20200629-170713.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;使用 SSO 的优点很明显：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;提升用户体验。
就以我厂为例。我厂有两个产品，丁香人才网和丁香园论坛，假如你是我厂用户，肯定无法忍受登录丁香园论坛的时候输入一次用户名密码，登录人才网又要输入一次用户名密码吧？&lt;/li&gt;
  &lt;li&gt;避免重复开发
假如你是我厂后端，每天任务都饱和的不行，肯定无法忍受到人才网开发一套登录逻辑，到论坛又开发一套登录逻辑吧？&lt;/li&gt;
  &lt;li&gt;提升安全系数
假如你是我厂运维，发现了一个安全隐患需要紧急修复。你肯定无法忍受给茫茫多的产品后端都发一封邮件，责令修复吧？万一漏了一个呢？&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;综合看来，SSO 不仅是有用的，而且是必要的。&lt;/p&gt;

&lt;h2 id=&quot;cas&quot;&gt;CAS&lt;/h2&gt;
&lt;p&gt;SSO 仅仅是一种架构，一种设计，而 CAS 则是实现 SSO 的一种手段。两者是抽象与具体的关系。当然，除了 CAS 之外，实现 SSO 还有其他手段，比如简单的 cookie。CAS （Central Authentication Service）中心授权服务，本身是一个开源协议，分为 1.0 版本和 2.0 版本。1.0 称为基础模式，2.0称为代理模式，适用于存在非 Web 应用之间的单点登录。本文只涉及 CAS 1.0，下文中将详细介绍。&lt;/p&gt;

&lt;h2 id=&quot;sso-的演进与分类&quot;&gt;SSO 的演进与分类&lt;/h2&gt;

&lt;p&gt;下面详述一下各种场景下的 SSO，它们之间是逐步升级，逐步复杂化的关系。&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;同域 SSO如图，同域 SSO 是最简单的一种情况。此时，两个产品都是在一个域名下，单点登录是很自然的选择。我们来捋一捋步骤，搞清楚这里的步骤是理解后文的基础，千万不要跳过。&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;用户访问产品 a，向 后台服务器发送登录请求。&lt;/li&gt;
      &lt;li&gt;登录认证成功，服务器把用户的登录信息写入 session。&lt;/li&gt;
      &lt;li&gt;服务器为该用户生成一个 cookie，并加入到 response header 中，随着请求返回而写入浏览器。该 cookie 的域设定为 dxy.cn。&lt;/li&gt;
      &lt;li&gt;下一次，当用户访问同域名的产品 b 时，由于 a 和 b 在同一域名下，也是 dxy.cn，浏览器会自动带上之前的 cookie。此时后台服务器就可以通过该 cookie 来验证登录状态了。&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;实际上，这种场景就是最简单最传统的登录操作。虽然我们把产品 a 和 b 人为分开了，但由于它们在同域上，就算看成是同一产品的不同类目也未尝不可。我们没有设置独立的 SSO 服务器，因为业务后台服务器本身就足以承担 SSO 的职能。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.jianshu.com/p/4b1a88d1c1d0&quot;&gt;参考原文1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://towardsdatascience.com/a-guide-to-unicode-utf-8-and-strings-in-python-757a232db95c&quot;&gt;参考原文2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.iteye.com/blog/mikzhang-1101705&quot;&gt;参考原文3&lt;/a&gt;&lt;/p&gt;</content><author><name></name></author><category term="IT" /><summary type="html"></summary></entry><entry><title type="html">SQL - Integrated Functions</title><link href="http://localhost:4000/sql-function/" rel="alternate" type="text/html" title="SQL - Integrated Functions" /><published>2020-06-20T00:00:00-07:00</published><updated>2020-06-20T00:00:00-07:00</updated><id>http://localhost:4000/sql-function</id><content type="html" xml:base="http://localhost:4000/sql-function/">&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/07/24/WkDXgGqNzrsaY9M.jpg&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;&lt;a href=&quot;https://juejin.im/post/5ea2d833f265da47cc02a6fd&quot;&gt;掘金原文&lt;/a&gt;&lt;/p&gt;</content><author><name></name></author><category term="Database" /><category term="SQL" /><summary type="html"></summary></entry><entry><title type="html">English Vocabulary - aisle, passage, corridor, hallway, and porch</title><link href="http://localhost:4000/english-aisle-passage-corridor-hallway-porch/" rel="alternate" type="text/html" title="English Vocabulary - aisle, passage, corridor, hallway, and porch" /><published>2020-06-14T00:00:00-07:00</published><updated>2020-06-14T00:00:00-07:00</updated><id>http://localhost:4000/english-aisle-passage-corridor-hallway-porch</id><content type="html" xml:base="http://localhost:4000/english-aisle-passage-corridor-hallway-porch/">&lt;p&gt;&lt;img src=&quot;https://preview.free3d.com/img/2019/03/2206078282665821244/erok78hd-900.jpg&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;aisle&quot;&gt;aisle&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;A passage between rows of seats in a building such as a church or theater, an airplane, or a train.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;passage--passageway&quot;&gt;passage / passageway&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;A covered walkway, between rooms or buildings.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;hall--hallway&quot;&gt;hall / hallway&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;A corridor in a building.&lt;/li&gt;
  &lt;li&gt;An entrance hall.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;corridor&quot;&gt;corridor&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;A narrow hallway, passageway, or gallery, often with rooms or apartments opening onto it.&lt;/li&gt;
  &lt;li&gt;A tract of land forming a passageway, such as one that allows an inland country access to the sea through another country.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;porch&quot;&gt;porch&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;A covered platform, usually having a separate roof, at an entrance to a building.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;An open or enclosed gallery or room attached to the outside of a building; a verandah.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;A porch is a wooden structure that forms a covered entrance to a doorway at ground level.  A porch is typically located at the front of the house.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;lobby&quot;&gt;lobby&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;An entryway or reception area.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;balcony&quot;&gt;balcony&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;A balcony is a platform that protrudes from the wall of an upper floor of a building and is enclosed by a railing. Balconies are often highly decorative, especially in wealthy or scenic areas. They are not designed as social areas but, rather, add an outdoor ambiance to the indoors.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;deck&quot;&gt;deck&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;A deck is a large, raised wooden floor attached to the back of a house and contained by a perimeter railing for safety. Decks are rarely covered, and usually have a rough or informal look that is not integrated with the rest of the house’s design. They are typically intended to be locations for large outdoor social gatherings, such as barbecues and birthday parties. Access to the deck may be from the ground through a stairway, or from the house through a back door.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;patio&quot;&gt;patio&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;A patio is typically a paved, roofless surface adjoining a residence that is generally intended for dining and recreation. These open-air living spaces are at ground level and are usually made from cement, stone, slate, or a combination of these materials.&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><category term="English" /><summary type="html"></summary></entry><entry><title type="html">English Vocabulary - Collaboration VS. Cooperation / coordination</title><link href="http://localhost:4000/english-collaborate-cooperate/" rel="alternate" type="text/html" title="English Vocabulary - Collaboration VS. Cooperation / coordination" /><published>2020-06-12T00:00:00-07:00</published><updated>2020-06-12T00:00:00-07:00</updated><id>http://localhost:4000/english-collaborate-cooperate</id><content type="html" xml:base="http://localhost:4000/english-collaborate-cooperate/">&lt;p&gt;&lt;img src=&quot;https://convergencelabs.com/assets/images/blog/letter-c.png&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;

&lt;!-- more --&gt;

&lt;p&gt;Collaboration and cooperation are two words which are often used interchangeably, especially in the workplace. Both terms are so overused that their distinct meanings have blended into one. They’ve effectively become buzzwords. But contrary to popular belief, they’re different!&lt;/p&gt;

&lt;p&gt;There’s a small but crucial difference which impacts a number of ways work gets done in organizations, including how people associate their work with the organization’s goals, and how they see their work in relation to their colleague’s.&lt;/p&gt;

&lt;p&gt;So it’s worth investigating the actual definitions of these two words. Let’s get right into it.&lt;/p&gt;

&lt;h2 id=&quot;what-is-collaboration&quot;&gt;What is collaboration?&lt;/h2&gt;
&lt;p&gt;First, let’s define collaboration. Collaboration is when a group of people come together and work on a project in support of a shared objective, outcome, or mission. It’s a photographer working with a designer to create a cover image, or the technology department working with the marketing team to improve their customer journey.&lt;/p&gt;

&lt;p&gt;Here’s an example:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;You and I work in different departments. You’re the lead developer on the tech team and I’m a senior product designer. We get together to discuss the product we’re working on and decide together that we need to make it more efficient for our users. This is our shared vision for the product. Together we design and implement a major change to the product that accomplishes this. In this respect, we’re co-authors of this particular project. We share credit.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;what-is-cooperation&quot;&gt;What is cooperation?&lt;/h2&gt;
&lt;p&gt;On the other hand, cooperation is when a group of people work in support of another’s goals. It’s a teammate helping you put together your presentation. Or a developer helping explain how to word the technical details in your monthly product email.&lt;/p&gt;

&lt;p&gt;The key point to note here is that there isn’t really a shared vision. Collaboration implies shared ownership and interest in a specific outcome. If you and I collaborate on a project, we have shared authorship. Cooperation, on the other hand, could just mean that you’ve given me help on something I’m working on and that I’m ultimately responsible for.&lt;/p&gt;

&lt;h2 id=&quot;why-is-this-important&quot;&gt;Why is this important?&lt;/h2&gt;
&lt;p&gt;The difference between these two terms is important because one term implies ownership by one individual and the other implies co-ownership by two or more individuals—or even by an entire organization. It’s the difference between working on someone else’s project (furthering their goals) and working with someone to achieve a goal which you both share.&lt;/p&gt;

&lt;p&gt;In short, it’s a question of ownership. The way your organization frames ownership of projects and goals, it turns out, has a profound impact on your people’s experience within your organization. Collaboration, more so than cooperation, communicates to your people that their work is meaningful and part of a larger group effort. In this sense, each collaborator turns into an equal stakeholder, and gains a sense that they’re contributing to something larger than themselves.&lt;/p&gt;

&lt;p&gt;This doesn’t mean that cooperation is worse than collaboration, or that it has to be one way or the other. In fact, people working together, especially in larger organizations, sometimes struggle to find shared visions just by the nature of how teams are structured. Sometimes there just isn’t any identifiable common ground. Similarly, people might cooperate on projects that other people are collaborating on. They offer their services but don’t share the same goal, vision, and co-ownership. Both collaboration and cooperation are necessary modes of effective teamwork.&lt;/p&gt;

&lt;p&gt;Of course there are some major benefits to finding common ground between teams and implementing changes to ensure collaboration not only happens, but makes sense. The first step is to find and communicate a shared sense of purpose between departments.&lt;/p&gt;

&lt;h2 id=&quot;creating-a-shared-sense-of-purpose&quot;&gt;Creating a shared sense of purpose&lt;/h2&gt;
&lt;p&gt;A shared purpose, above all, is the key driver of collaboration. But communicating that purpose and instilling it in people is a massive challenge in and of itself. Collaboration can’t be enforced; it has to come naturally out of a shared interest in achieving goals. Only then can the collaborative process take hold in an organization.&lt;/p&gt;

&lt;p&gt;A lot of this will depend on your leaders’ ability to break down divisions between departments and align teams around common goals. This can be done in regular All Hands meetings, quarterly get-togethers, and by frequently celebrating collaborative relationships between teams: holding them up as something all employees should aspire to. Leaders should identify shared visions and acknowledge how teams formed working relationships to make those visions a reality.&lt;/p&gt;

&lt;p&gt;But emphasizing a shared sense of purpose isn’t only the work of leaders. It can be done by anyone, either in an official meeting setting or just in casual conversation: “What’s your team working on? Oh, interesting. There’s some overlap with my team. Let’s set up a meeting next week to see how we can achieve that goal together.”&lt;/p&gt;

&lt;h2 id=&quot;collaboration-as-a-process&quot;&gt;Collaboration as a process&lt;/h2&gt;
&lt;p&gt;When people share the same purpose, collaboration happens almost naturally. It’s actually kind of weird! But effective collaboration does require some organization. And even the most collaborative environment will find room for cooperation too.&lt;/p&gt;

&lt;p&gt;One way to go about making this happen is to sit down with other teams regularly to find intersections where collaborating makes sense. At Jostle, teams are always getting together in conference rooms to give status reports, express pain points, and figure out how we can help each other achieve shared goals. We’ve all made it part of our collaborative process to always be exploring the ways we intersect with other teams. On top of that, sharing information is crucial, for both the process and the articulation of shared purpose.&lt;/p&gt;

&lt;p&gt;Finding complementary skills between teams is one more way to build the connections necessary for collaboration. Focus on people whose combined skills can handle shared projects and start to build relationships from that. Think of this as exploring a potential partnership that bridges the departmental divide (hopefully taking down any silos with it).&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;Collaboration and cooperation are not at odds with each other. Rather, they’re two ways of making teamwork happen. And although this article focuses more on collaboration, I want to be clear that these two are often occurring in tandem, depending on the stakeholders involved. A collaborative environment is also simultaneously a cooperative environment.&lt;/p&gt;

&lt;h2 id=&quot;coordination&quot;&gt;coordination&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;the organization of the different elements of a complex body or activity so as to enable them to work together effectively.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;the ability to use different parts of the body together smoothly and efficiently.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;the linking of atoms by coordinate bonds.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&quot;https://blog.jostle.me/blog/collaboration-vs-cooperation&quot;&gt;参考&lt;/a&gt;&lt;/p&gt;</content><author><name></name></author><category term="English" /><summary type="html"></summary></entry><entry><title type="html">Security - Encryption - Signature or Key</title><link href="http://localhost:4000/security-encryption/" rel="alternate" type="text/html" title="Security - Encryption - Signature or Key" /><published>2020-06-10T00:00:00-07:00</published><updated>2020-06-10T00:00:00-07:00</updated><id>http://localhost:4000/security-encryption</id><content type="html" xml:base="http://localhost:4000/security-encryption/">&lt;p&gt;&lt;img src=&quot;https://upload.wikimedia.org/wikipedia/commons/thumb/4/4d/Illustration_of_digital_signature.svg/1024px-Illustration_of_digital_signature.svg.png&quot; alt=&quot;img&quot; /&gt;&lt;/p&gt;

&lt;!-- more --&gt;

&lt;ol&gt;
  &lt;li&gt;A对信息签名的作用是确认这个信息是A发出的，不是别人发出的；&lt;/li&gt;
  &lt;li&gt;加密是对内容进行机密性保护，主要是保证信息内容不会被其他人获取，只有B可以获取。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;也就是保证整个过程的端到端的唯一确定性，这个信息是A发出的（不是别人），且是发给B的，只有B才被获得具体内容（别人就算截获信息也不能获得具体内容）。这只是大概说了作用，具体说来，涉及到密钥相关的东西。密钥有公钥和私钥之分。那么这里一共有两组四个密钥：A的公钥（PUB_A），A的私钥（PRI_A）；B的公钥（PUB_B），B的私钥（PRI_B）。公钥一般用来加密，私钥用来签名。通常公钥是公开出去的，但是私钥只能自己私密持有。公钥和私钥唯一对应，用某个公钥签名过得内容只能用对应的私钥才能解签验证；同样用某个私钥加密的内容只能用对应的公钥才能解密。&lt;/p&gt;

&lt;p&gt;这时A向B发送信息的整个签名和加密的过程如下：&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;A先用自己的私钥（PRI_A）对信息（一般是信息的摘要）进行签名。&lt;/li&gt;
  &lt;li&gt;A接着使用B的公钥（PUB_B）对信息内容和签名信息进行加密。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;这样当B接收到A的信息后，获取信息内容的步骤如下：&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;用自己的私钥（PRI_B）解密A用B的公钥（PUB_B）加密的内容；&lt;/li&gt;
  &lt;li&gt;得到解密后的明文后用A的公钥（PUB_A）解签A用A自己的私钥（PRI_A）的签名。&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;从而整个过程就保证了开始说的端到端的唯一确认。A的签名只有A的公钥才能解签，这样B就能确认这个信息是A发来的；A的加密只有B的私钥才能解密，这样A就能确认这份信息只能被B读取。&lt;/p&gt;

&lt;p&gt;签名密钥和加密密钥
由于公钥所具有的两种不同用途,在实际应用中,需要分别配置用于数字签名/验证的
密钥对和用于数据加密/解密的密钥对,这里分别称为签名密钥对和加密密钥对｡这两对密
钥由于用途不同,因此,对于密钥的管理也就有着不同的要求｡&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;签名密钥对的管理
签名密钥对由签名私钥和验证公钥组成｡
签名私钥是发送方身份的证明,具有日常生活中公章､私章的效力｡为保证其惟一性,
签名私钥绝对不能够做备份和存档,丢失后只需重新生成新的密钥对｡验证公钥需要存档,
用于验证旧的数字签名｡
用做数字签名的这一对密钥一般可以有较长的生命期｡&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;加密密钥对的管理
加密密钥对由加密公钥和解密私钥组成｡
为防止密钥丢失时数据无法恢复,解密私钥应该进行备份,同时还可能需要进行存档,
以便能在任何时候解密历史密文数据｡加密公钥则无需备份和存档,加密公钥丢失时,只需
重新生成密钥对即可｡
这种密钥应该频繁更换,故加密密钥对的生命周期较短｡&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;不难看出,这两对密钥的密钥管理要求存在互相冲突的地方,因此,必须针对不同的用
途使用不同的密钥对｡尽管有的公钥体制算法如RSA,既可以用于加密,又可以用于签名,
但由于这两对密钥在管理上截然不同的要求,在使用中仍然必须为用户配置两对密钥:其一
用于数字签名,另一用于加密｡而采用一对密钥,既用于加密,又用于签名,这种做法是不安
全的｡&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.zhihu.com/question/27669212&quot;&gt;参考 1&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://blog.csdn.net/gotohbu/java/article/details/4328066&quot;&gt;参考 2&lt;/a&gt;&lt;/p&gt;</content><author><name></name></author><category term="IT" /><summary type="html"></summary></entry></feed>