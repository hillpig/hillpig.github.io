<p><img src="https://4.bp.blogspot.com/-uLmc1hOq1fE/WP-acf2E4rI/AAAAAAAAoM8/UJvPps1Vx84kMWoCl4POGFovxJ6cx-oVQCLcB/s400/transient.JPG" alt="img" /></p>

<!-- more -->

<ol>
  <li>
    <p>一旦变量被transient修饰，变量将不再是对象持久化的一部分，该变量内容在序列化后无法获得访问。</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kn">import</span> <span class="nn">java.io.FileInputStream</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.io.FileNotFoundException</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.io.FileOutputStream</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.io.ObjectInputStream</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.io.ObjectOutputStream</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.io.Serializable</span><span class="o">;</span>

 <span class="cm">/**
 * @description 使用transient关键字不序列化某个变量
 *        注意读取的时候，读取数据的顺序一定要和存放数据的顺序保持一致
 *        
 * @author Alexia
 * @date  2013-10-15
 */</span>
 <span class="kd">public</span> <span class="kd">class</span> <span class="nc">TransientTest</span> <span class="o">{</span>
        
     <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
            
         <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">();</span>
         <span class="n">user</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"Alexia"</span><span class="o">);</span>
         <span class="n">user</span><span class="o">.</span><span class="na">setPasswd</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>
            
         <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"read before Serializable: "</span><span class="o">);</span>
         <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"username: "</span> <span class="o">+</span> <span class="n">user</span><span class="o">.</span><span class="na">getUsername</span><span class="o">());</span>
         <span class="nc">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"password: "</span> <span class="o">+</span> <span class="n">user</span><span class="o">.</span><span class="na">getPasswd</span><span class="o">());</span>
            
         <span class="k">try</span> <span class="o">{</span>
             <span class="nc">ObjectOutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ObjectOutputStream</span><span class="o">(</span>
                     <span class="k">new</span> <span class="nf">FileOutputStream</span><span class="o">(</span><span class="s">"C:/user.txt"</span><span class="o">));</span>
             <span class="n">os</span><span class="o">.</span><span class="na">writeObject</span><span class="o">(</span><span class="n">user</span><span class="o">);</span> <span class="c1">// 将User对象写进文件</span>
             <span class="n">os</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
             <span class="n">os</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
         <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
             <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
         <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
             <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
         <span class="o">}</span>
         <span class="k">try</span> <span class="o">{</span>
             <span class="nc">ObjectInputStream</span> <span class="n">is</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ObjectInputStream</span><span class="o">(</span><span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span>
                     <span class="s">"C:/user.txt"</span><span class="o">));</span>
             <span class="n">user</span> <span class="o">=</span> <span class="o">(</span><span class="nc">User</span><span class="o">)</span> <span class="n">is</span><span class="o">.</span><span class="na">readObject</span><span class="o">();</span> <span class="c1">// 从流中读取User的数据</span>
             <span class="n">is</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                
             <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"\nread after Serializable: "</span><span class="o">);</span>
             <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"username: "</span> <span class="o">+</span> <span class="n">user</span><span class="o">.</span><span class="na">getUsername</span><span class="o">());</span>
             <span class="nc">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"password: "</span> <span class="o">+</span> <span class="n">user</span><span class="o">.</span><span class="na">getPasswd</span><span class="o">());</span>
                
         <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
             <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
         <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
             <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
         <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
             <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
         <span class="o">}</span>
     <span class="o">}</span>
 <span class="o">}</span>

 <span class="kd">class</span> <span class="nc">User</span> <span class="kd">implements</span> <span class="nc">Serializable</span> <span class="o">{</span>
     <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">8294180014912103005L</span><span class="o">;</span>  
        
     <span class="kd">private</span> <span class="nc">String</span> <span class="n">username</span><span class="o">;</span>
     <span class="kd">private</span> <span class="kd">transient</span> <span class="nc">String</span> <span class="n">passwd</span><span class="o">;</span>
        
     <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getUsername</span><span class="o">()</span> <span class="o">{</span>
         <span class="k">return</span> <span class="n">username</span><span class="o">;</span>
     <span class="o">}</span>
        
     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">username</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">.</span><span class="na">username</span> <span class="o">=</span> <span class="n">username</span><span class="o">;</span>
     <span class="o">}</span>
        
     <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPasswd</span><span class="o">()</span> <span class="o">{</span>
         <span class="k">return</span> <span class="n">passwd</span><span class="o">;</span>
     <span class="o">}</span>
        
     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPasswd</span><span class="o">(</span><span class="nc">String</span> <span class="n">passwd</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">.</span><span class="na">passwd</span> <span class="o">=</span> <span class="n">passwd</span><span class="o">;</span>
     <span class="o">}</span>

 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>transient关键字只能修饰变量，而不能修饰方法和类。注意，本地变量是不能被transient关键字修饰的。变量如果是用户自定义类变量，则该类需要实现Serializable接口。</p>
  </li>
  <li>
    <p>被transient关键字修饰的变量不再能被序列化，一个静态变量不管是否被transient修饰，均不能被序列化。</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kn">import</span> <span class="nn">java.io.FileInputStream</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.io.FileNotFoundException</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.io.FileOutputStream</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.io.ObjectInputStream</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.io.ObjectOutputStream</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.io.Serializable</span><span class="o">;</span>

 <span class="cm">/**
 * @description 使用transient关键字不序列化某个变量
 *        注意读取的时候，读取数据的顺序一定要和存放数据的顺序保持一致
 *        
 * @author Alexia
 * @date  2013-10-15
 */</span>
 <span class="kd">public</span> <span class="kd">class</span> <span class="nc">TransientTest</span> <span class="o">{</span>
        
     <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
            
         <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">();</span>
         <span class="n">user</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="s">"Alexia"</span><span class="o">);</span>
         <span class="n">user</span><span class="o">.</span><span class="na">setPasswd</span><span class="o">(</span><span class="s">"123456"</span><span class="o">);</span>
            
         <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"read before Serializable: "</span><span class="o">);</span>
         <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"username: "</span> <span class="o">+</span> <span class="n">user</span><span class="o">.</span><span class="na">getUsername</span><span class="o">());</span>
         <span class="nc">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"password: "</span> <span class="o">+</span> <span class="n">user</span><span class="o">.</span><span class="na">getPasswd</span><span class="o">());</span>
            
         <span class="k">try</span> <span class="o">{</span>
             <span class="nc">ObjectOutputStream</span> <span class="n">os</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ObjectOutputStream</span><span class="o">(</span>
                     <span class="k">new</span> <span class="nf">FileOutputStream</span><span class="o">(</span><span class="s">"C:/user.txt"</span><span class="o">));</span>
             <span class="n">os</span><span class="o">.</span><span class="na">writeObject</span><span class="o">(</span><span class="n">user</span><span class="o">);</span> <span class="c1">// 将User对象写进文件</span>
             <span class="n">os</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
             <span class="n">os</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
         <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
             <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
         <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
             <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
         <span class="o">}</span>
         <span class="k">try</span> <span class="o">{</span>
             <span class="c1">// 在反序列化之前改变username的值</span>
             <span class="nc">User</span><span class="o">.</span><span class="na">username</span> <span class="o">=</span> <span class="s">"jmwang"</span><span class="o">;</span>
                
             <span class="nc">ObjectInputStream</span> <span class="n">is</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ObjectInputStream</span><span class="o">(</span><span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span>
                     <span class="s">"C:/user.txt"</span><span class="o">));</span>
             <span class="n">user</span> <span class="o">=</span> <span class="o">(</span><span class="nc">User</span><span class="o">)</span> <span class="n">is</span><span class="o">.</span><span class="na">readObject</span><span class="o">();</span> <span class="c1">// 从流中读取User的数据</span>
             <span class="n">is</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
                
             <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"\nread after Serializable: "</span><span class="o">);</span>
             <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"username: "</span> <span class="o">+</span> <span class="n">user</span><span class="o">.</span><span class="na">getUsername</span><span class="o">());</span>
             <span class="nc">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"password: "</span> <span class="o">+</span> <span class="n">user</span><span class="o">.</span><span class="na">getPasswd</span><span class="o">());</span>
                
         <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">FileNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
             <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
         <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
             <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
         <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">ClassNotFoundException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
             <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
         <span class="o">}</span>
     <span class="o">}</span>
 <span class="o">}</span>

 <span class="kd">class</span> <span class="nc">User</span> <span class="kd">implements</span> <span class="nc">Serializable</span> <span class="o">{</span>
     <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">8294180014912103005L</span><span class="o">;</span>  
        
     <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="n">username</span><span class="o">;</span>
     <span class="kd">private</span> <span class="kd">transient</span> <span class="nc">String</span> <span class="n">passwd</span><span class="o">;</span>
        
     <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getUsername</span><span class="o">()</span> <span class="o">{</span>
         <span class="k">return</span> <span class="n">username</span><span class="o">;</span>
     <span class="o">}</span>
        
     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setUsername</span><span class="o">(</span><span class="nc">String</span> <span class="n">username</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">.</span><span class="na">username</span> <span class="o">=</span> <span class="n">username</span><span class="o">;</span>
     <span class="o">}</span>
        
     <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getPasswd</span><span class="o">()</span> <span class="o">{</span>
         <span class="k">return</span> <span class="n">passwd</span><span class="o">;</span>
     <span class="o">}</span>
        
     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setPasswd</span><span class="o">(</span><span class="nc">String</span> <span class="n">passwd</span><span class="o">)</span> <span class="o">{</span>
         <span class="k">this</span><span class="o">.</span><span class="na">passwd</span> <span class="o">=</span> <span class="n">passwd</span><span class="o">;</span>
     <span class="o">}</span>

 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>Java中，对象的序列化可以通过实现两种接口来实现，若实现的是Serializable接口，则所有的序列化将会自动进行，若实现的是Externalizable接口，则没有任何东西可以自动序列化，需要在writeExternal方法中进行手工指定所要序列化的变量，这与是否被transient修饰无关。</p>

    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="kn">import</span> <span class="nn">java.io.Externalizable</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.io.File</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.io.FileInputStream</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.io.FileOutputStream</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.io.ObjectInput</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.io.ObjectInputStream</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.io.ObjectOutput</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">java.io.ObjectOutputStream</span><span class="o">;</span>

 <span class="cm">/**
 * @descripiton Externalizable接口的使用
 * 
 * @author Alexia
 * @date 2013-10-15
 *
 */</span>
 <span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExternalizableTest</span> <span class="kd">implements</span> <span class="nc">Externalizable</span> <span class="o">{</span>

     <span class="kd">private</span> <span class="kd">transient</span> <span class="nc">String</span> <span class="n">content</span> <span class="o">=</span> <span class="s">"是的，我将会被序列化，不管我是否被transient关键字修饰"</span><span class="o">;</span>

     <span class="nd">@Override</span>
     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">writeExternal</span><span class="o">(</span><span class="nc">ObjectOutput</span> <span class="n">out</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
         <span class="n">out</span><span class="o">.</span><span class="na">writeObject</span><span class="o">(</span><span class="n">content</span><span class="o">);</span>
     <span class="o">}</span>

     <span class="nd">@Override</span>
     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">readExternal</span><span class="o">(</span><span class="nc">ObjectInput</span> <span class="n">in</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span><span class="o">,</span>
             <span class="nc">ClassNotFoundException</span> <span class="o">{</span>
         <span class="n">content</span> <span class="o">=</span> <span class="o">(</span><span class="nc">String</span><span class="o">)</span> <span class="n">in</span><span class="o">.</span><span class="na">readObject</span><span class="o">();</span>
     <span class="o">}</span>

     <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
            
         <span class="nc">ExternalizableTest</span> <span class="n">et</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ExternalizableTest</span><span class="o">();</span>
         <span class="nc">ObjectOutput</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ObjectOutputStream</span><span class="o">(</span><span class="k">new</span> <span class="nc">FileOutputStream</span><span class="o">(</span>
                 <span class="k">new</span> <span class="nf">File</span><span class="o">(</span><span class="s">"test"</span><span class="o">)));</span>
         <span class="n">out</span><span class="o">.</span><span class="na">writeObject</span><span class="o">(</span><span class="n">et</span><span class="o">);</span>

         <span class="nc">ObjectInput</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ObjectInputStream</span><span class="o">(</span><span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="k">new</span> <span class="nc">File</span><span class="o">(</span>
                 <span class="s">"test"</span><span class="o">)));</span>
         <span class="n">et</span> <span class="o">=</span> <span class="o">(</span><span class="nc">ExternalizableTest</span><span class="o">)</span> <span class="n">in</span><span class="o">.</span><span class="na">readObject</span><span class="o">();</span>
         <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">et</span><span class="o">.</span><span class="na">content</span><span class="o">);</span>

         <span class="n">out</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
         <span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
     <span class="o">}</span>
 <span class="o">}</span>
</code></pre></div>    </div>
  </li>
</ol>
